<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>games | midnight</title>
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/wallpaper.css">
  <link rel="stylesheet" href="css/accessibility.css">
  <link rel="stylesheet" href="css/animations.css">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* Games-specific styles */
    .games-container {
      margin-bottom: 50px;
    }
    
    .category-section {
      margin-bottom: 40px;
    }
    
    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .category-title {
      font-size: 24px;
      font-weight: 700;
    }
    
    .category-actions {
      display: flex;
      gap: 10px;
    }
    
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .game-card {
      border-radius: 16px;
      overflow: hidden;
      background: var(--card-bg);
      transition: var(--transition-default);
      cursor: pointer;
      position: relative;
      will-change: transform;
      transform: translateZ(0);
      display: flex;
      flex-direction: column;
    }
    
    .game-card:hover {
      transform: translateY(-5px);
    }
    
    .game-thumbnail {
      aspect-ratio: 16/9;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .game-info {
      padding: 15px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    
    .game-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    
    .game-icon {
      margin-right: 10px;
      color: var(--color-blue);
    }
    
    .game-description {
      font-size: 14px;
      opacity: 0.7;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      margin-bottom: 15px;
      flex: 1;
    }
    
    .game-play-button {
      background: rgba(58, 174, 252, 0.2);
      color: var(--color-blue);
      border: none;
      border-radius: 16px;
      padding: 8px 16px;
      font-family: 'Inter', sans-serif;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-default);
      text-transform: lowercase;
      align-self: flex-start;
    }
    
    .game-play-button:hover {
      background: rgba(58, 174, 252, 0.3);
    }
    
    /* Game Details Drawer */
    .game-details {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border-radius: 20px 20px 0 0;
      padding: 30px;
      transform: translateY(100%);
      transition: transform 0.4s ease;
      z-index: 1000;
      box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.3);
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .game-details.active {
      transform: translateY(0);
    }
    
    .game-details-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .game-details-close:hover {
      background: var(--color-blue);
    }
    
    .game-details-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .game-details-logo {
      width: 80px;
      height: 80px;
      margin-right: 20px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .game-details-title {
      font-size: 28px;
      font-weight: 700;
    }
    
    .game-details-categories {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .game-category {
      padding: 5px 10px;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.3);
      font-size: 12px;
    }
    
    .game-details-description {
      margin-bottom: 30px;
      line-height: 1.6;
    }
    
    .game-details-actions {
      display: flex;
      gap: 15px;
    }
    
    .game-details-action {
      padding: 12px 24px;
      border-radius: 20px;
      background: var(--color-blue);
      color: white;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-default);
      border: none;
      font-family: 'Inter', sans-serif;
      text-transform: lowercase;
    }
    
    .game-details-action:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px var(--color-blue-glow);
    }
    
    .game-details-action.secondary {
      background: rgba(0, 0, 0, 0.3);
    }
    
    /* Game Frame */
    .game-frame-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      display: flex;
      flex-direction: column;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .game-frame-container.active {
      opacity: 1;
      visibility: visible;
    }
    
    .game-frame-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
      background: var(--card-bg);
    }
    
    .game-frame-title {
      font-size: 18px;
      font-weight: 700;
    }
    
    .game-frame-close {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .game-frame-close:hover {
      background: var(--color-blue);
    }
    
    .game-frame {
      flex: 1;
      border: none;
      width: 100%;
      height: 100%;
    }
    
    /* Category Filter */
    .category-filter {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .category-filter-item {
      padding: 8px 16px;
      border-radius: 20px;
      background: var(--card-bg);
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .category-filter-item:hover {
      background: rgba(58, 174, 252, 0.2);
    }
    
    .category-filter-item.active {
      background: var(--color-blue);
      color: white;
    }
    
    /* Overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .overlay.active {
      opacity: 1;
      visibility: visible;
    }
  </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body class="theme-deep-blue">
  <div class="app-container">
    <!-- Sidebar -->
    <div class="sidebar-container"></div>
    
    <!-- Content -->
    <div class="content">
      <div class="container">
        <!-- Header -->
        <div class="header-container"></div>
        
        <!-- Category Filter -->
        <div class="category-filter">
          <div class="category-filter-item active" data-category="all">all</div>
          <div class="category-filter-item" data-category="arcade">arcade</div>
          <div class="category-filter-item" data-category="racing">racing</div>
          <div class="category-filter-item" data-category="retro">retro</div>
          <div class="category-filter-item" data-category="puzzles">puzzles</div>
          <div class="category-filter-item" data-category="favorites">favorites</div>
        </div>
        
        <!-- Games Container -->
        <div class="games-container">
          <div class="category-section">
            <div class="category-header">
              <h2 class="category-title">all games</h2>
            </div>
            
            <div class="games-grid staggered-list" id="games-grid">
              <!-- Games will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Game Details Drawer -->
  <div class="game-details" id="game-details">
    <div class="game-details-close">
      <i class="fa-solid fa-times"></i>
    </div>
    
    <div class="game-details-header">
      <div class="game-details-logo" id="game-details-logo"></div>
      <div>
        <h2 class="game-details-title" id="game-details-title"></h2>
        <div class="game-details-categories" id="game-details-categories"></div>
      </div>
    </div>
    
    <div class="game-details-description" id="game-details-description"></div>
    
    <div class="game-details-actions">
      <button class="game-details-action" id="play-game">play game</button>
      <button class="game-details-action secondary" id="add-favorite">add to favorites</button>
    </div>
  </div>
  
  <!-- Game Frame -->
  <div class="game-frame-container" id="game-frame-container">
    <div class="game-frame-header">
      <div class="game-frame-title" id="game-frame-title"></div>
      <div class="game-frame-close">
        <i class="fa-solid fa-times"></i>
      </div>
    </div>
    
    <iframe class="game-frame" id="game-frame" allowfullscreen></iframe>
  </div>
  
  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>
  
  <!-- Scripts -->
  <script src="js/theme.js"></script>
  <script src="js/wallpaper.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/header.js"></script>
  <script src="js/main.js"></script>
  
  <script>
    // Games functionality
    document.addEventListener('DOMContentLoaded', () => {
      let games = [];
      let currentGame = null;
      let favorites = loadFavorites();
      
      // DOM elements
      const gamesGrid = document.getElementById('games-grid');
      const gameDetails = document.getElementById('game-details');
      const gameDetailsLogo = document.getElementById('game-details-logo');
      const gameDetailsTitle = document.getElementById('game-details-title');
      const gameDetailsCategories = document.getElementById('game-details-categories');
      const gameDetailsDescription = document.getElementById('game-details-description');
      const playGameBtn = document.getElementById('play-game');
      const addFavoriteBtn = document.getElementById('add-favorite');
      const gameFrameContainer = document.getElementById('game-frame-container');
      const gameFrame = document.getElementById('game-frame');
      const gameFrameTitle = document.getElementById('game-frame-title');
      const overlay = document.getElementById('overlay');
      const categoryFilter = document.querySelectorAll('.category-filter-item');
      
      // Load games from JSON
      fetch('data/games.json')
        .then(response => response.json())
        .then(data => {
          games = data;
          renderGames(games);
        })
        .catch(error => {
          console.error('Error loading games:', error);
          gamesGrid.innerHTML = '<p>failed to load games</p>';
        });
      
      // Render games
      function renderGames(gamesToRender) {
        gamesGrid.innerHTML = '';
        
        gamesToRender.forEach(game => {
          const gameCard = document.createElement('div');
          gameCard.className = 'game-card';
          gameCard.dataset.id = game.id;
          
          gameCard.innerHTML = `
            <div class="game-thumbnail" style="background-image: url('${game.thumb}')"></div>
            <div class="game-info">
              <div class="game-title">
                <span class="game-icon"><i class="${game.icon}"></i></span>
                ${game.title}
              </div>
              <div class="game-description">${game.description}</div>
              <button class="game-play-button">play game</button>
            </div>
          `;
          
          const playButton = gameCard.querySelector('.game-play-button');
          playButton.addEventListener('click', (e) => {
            e.stopPropagation();
            playGame(game);
          });
          
          gameCard.addEventListener('click', () => {
            showGameDetails(game);
          });
          
          gamesGrid.appendChild(gameCard);
        });
      }
      
      // Show game details
      function showGameDetails(game) {
        currentGame = game;
        
        gameDetailsLogo.style.backgroundImage = `url('${game.logo}')`;
        gameDetailsTitle.textContent = game.title;
        gameDetailsDescription.textContent = game.description;
        
        // Categories
        gameDetailsCategories.innerHTML = '';
        game.categories.forEach(category => {
          const categoryEl = document.createElement('div');
          categoryEl.className = 'game-category';
          categoryEl.textContent = category;
          gameDetailsCategories.appendChild(categoryEl);
        });
        
        // Update favorite button
        updateFavoriteButton();
        
        // Show details and overlay
        gameDetails.classList.add('active');
        overlay.classList.add('active');
      }
      
      // Hide game details
      function hideGameDetails() {
        gameDetails.classList.remove('active');
        overlay.classList.remove('active');
      }
      
      // Play game
      function playGame() {
        if (!currentGame) return;
        
        gameFrameTitle.textContent = currentGame.title;
        gameFrame.src = currentGame.embedUrl;
        gameFrameContainer.classList.add('active');
      }
      
      // Close game frame
      function closeGameFrame() {
        gameFrameContainer.classList.remove('active');
        gameFrame.src = '';
      }
      
      // Load favorites from localStorage
      function loadFavorites() {
        const saved = localStorage.getItem('midnight_game_favorites');
        return saved ? JSON.parse(saved) : [];
      }
      
      // Save favorites to localStorage
      function saveFavorites() {
        localStorage.setItem('midnight_game_favorites', JSON.stringify(favorites));
      }
      
      // Toggle favorite
      function toggleFavorite() {
        if (!currentGame) return;
        
        const index = favorites.indexOf(currentGame.id);
        
        if (index === -1) {
          favorites.push(currentGame.id);
        } else {
          favorites.splice(index, 1);
        }
        
        saveFavorites();
        updateFavoriteButton();
      }
      
      // Update favorite button
      function updateFavoriteButton() {
        if (!currentGame) return;
        
        const isFavorite = favorites.includes(currentGame.id);
        
        if (isFavorite) {
          addFavoriteBtn.textContent = 'remove from favorites';
        } else {
          addFavoriteBtn.textContent = 'add to favorites';
        }
      }
      
      // Filter games by category
      function filterGames(category) {
        if (category === 'all') {
          renderGames(games);
          document.querySelector('.category-title').textContent = 'all games';
        } else if (category === 'favorites') {
          const favoriteGames = games.filter(game => favorites.includes(game.id));
          renderGames(favoriteGames);
          document.querySelector('.category-title').textContent = 'favorites';
        } else {
          const filteredGames = games.filter(game => game.categories.includes(category));
          renderGames(filteredGames);
          document.querySelector('.category-title').textContent = category;
        }
      }
      
      // Event listeners
      document.querySelector('.game-details-close').addEventListener('click', hideGameDetails);
      document.querySelector('.game-frame-close').addEventListener('click', closeGameFrame);
      overlay.addEventListener('click', hideGameDetails);
      playGameBtn.addEventListener('click', playGame);
      addFavoriteBtn.addEventListener('click', toggleFavorite);
      
      // Category filter
      categoryFilter.forEach(item => {
        item.addEventListener('click', () => {
          categoryFilter.forEach(el => el.classList.remove('active'));
          item.classList.add('active');
          filterGames(item.dataset.category);
        });
      });
    });
  </script>
</body>
</html>

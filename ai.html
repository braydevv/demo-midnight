<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>cloudai | midnight</title>
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/wallpaper.css">
  <link rel="stylesheet" href="css/accessibility.css">
  <link rel="stylesheet" href="css/animations.css">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* AI Chat-specific styles */
    .ai-container {
      display: flex;
      height: calc(100vh - 120px);
    }
    
    /* Thread List */
    .thread-list {
      width: 250px;
      background: var(--card-bg);
      border-radius: 20px;
      margin-right: 20px;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    
    .thread-list-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .thread-list-title {
      font-size: 18px;
      font-weight: 700;
    }
    
    .new-chat-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--color-blue);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .new-chat-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px var(--color-blue-glow);
    }
    
    .thread-items {
      flex: 1;
      overflow-y: auto;
    }
    
    .thread-item {
      padding: 10px 15px;
      border-radius: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .thread-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .thread-item.active {
      background: rgba(58, 174, 252, 0.2);
    }
    
    .thread-item-title {
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .thread-item-preview {
      font-size: 12px;
      opacity: 0.7;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Chat Area */
    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--card-bg);
      border-radius: 20px;
      overflow: hidden;
    }
    
    .chat-header {
      padding: 15px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .chat-title {
      font-size: 18px;
      font-weight: 700;
    }
    
    .chat-actions {
      display: flex;
      gap: 10px;
    }
    
    .chat-action {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-default);
    }
    
    .chat-action:hover {
      background: rgba(58, 174, 252, 0.3);
    }
    
    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    
    .message {
      max-width: 80%;
      margin-bottom: 20px;
      animation: fadeIn 0.3s ease;
    }
    
    .message.user {
      align-self: flex-end;
    }
    
    .message.ai {
      align-self: flex-start;
    }
    
    .message-bubble {
      padding: 15px;
      border-radius: 16px;
      position: relative;
    }
    
    .message.user .message-bubble {
      background: var(--color-blue);
      color: white;
      border-bottom-right-radius: 5px;
    }
    
    .message.ai .message-bubble {
      background: rgba(0, 0, 0, 0.3);
      border-bottom-left-radius: 5px;
    }
    
    .message-content {
      line-height: 1.5;
    }
    
    .message-time {
      font-size: 12px;
      opacity: 0.7;
      margin-top: 5px;
      text-align: right;
    }
    
    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-radius: 16px;
      background: rgba(0, 0, 0, 0.3);
      width: fit-content;
      margin-bottom: 20px;
      align-self: flex-start;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-bottom-left-radius: 5px;
    }
    
    .typing-indicator.active {
      opacity: 1;
    }
    
    .typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-color);
      margin: 0 2px;
      opacity: 0.7;
    }
    
    .typing-dot:nth-child(1) {
      animation: typingDot 1.5s infinite 0s;
    }
    
    .typing-dot:nth-child(2) {
      animation: typingDot 1.5s infinite 0.2s;
    }
    
    .typing-dot:nth-child(3) {
      animation: typingDot 1.5s infinite 0.4s;
    }
    
    @keyframes typingDot {
      0% { opacity: 0.4; }
      50% { opacity: 1; }
      100% { opacity: 0.4; }
    }
    
    /* Input Area */
    .input-area {
      padding: 15px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
    }
    
    .message-input {
      flex: 1;
      padding: 12px 15px;
      border-radius: 20px;
      border: none;
      background: rgba(0, 0, 0, 0.3);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      resize: none;
      max-height: 120px;
      transition: var(--transition-default);
    }
    
    .message-input:focus {
      outline: none;
      box-shadow: 0 0 15px var(--color-blue-glow);
    }
    
    .send-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--color-blue);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-left: 10px;
      transition: var(--transition-default);
    }
    
    .send-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px var(--color-blue-glow);
    }
    
    /* Settings Dropdown */
    .settings-dropdown {
      position: absolute;
      top: 60px;
      right: 20px;
      background: var(--card-bg);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 100;
      width: 250px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: var(--transition-default);
    }
    
    .settings-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .settings-section {
      margin-bottom: 20px;
    }
    
    .settings-section:last-child {
      margin-bottom: 0;
    }
    
    .settings-section h3 {
      font-size: 16px;
      margin-bottom: 10px;
    }
    
    .settings-option {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    .settings-option:last-child {
      margin-bottom: 0;
    }
    
    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.3);
      transition: var(--transition-default);
      border-radius: 24px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: var(--transition-default);
      border-radius: 50%;
    }
    
    input:checked + .toggle-slider {
      background-color: var(--color-blue);
    }
    
    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }
    
    /* Empty State */
    .empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 20px;
      opacity: 0.5;
    }
    
    .empty-state-title {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .empty-state-text {
      font-size: 16px;
      opacity: 0.7;
      text-align: center;
      max-width: 400px;
      margin-bottom: 20px;
    }
    
    .empty-state-btn {
      padding: 12px 24px;
      border-radius: 20px;
      background: var(--color-blue);
      color: white;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition-default);
      border: none;
      font-family: 'Inter', sans-serif;
      text-transform: lowercase;
    }
    
    .empty-state-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px var(--color-blue-glow);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .thread-list {
        display: none;
      }
    }
  </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body class="theme-deep-blue">
  <div class="app-container">
    <!-- Sidebar -->
    <div class="sidebar-container"></div>
    
    <!-- Content -->
    <div class="content">
      <div class="container">
        <!-- Header -->
        <div class="header-container"></div>
        
        <!-- AI Container -->
        <div class="ai-container">
          <!-- Thread List -->
          <div class="thread-list">
            <div class="thread-list-header">
              <div class="thread-list-title">conversations</div>
              <div class="new-chat-btn" id="new-chat-btn">
                <i class="fa-solid fa-plus"></i>
              </div>
            </div>
            
            <div class="thread-items" id="thread-items">
              <!-- Thread items will be populated by JavaScript -->
            </div>
          </div>
          
          <!-- Chat Area -->
          <div class="chat-area">
            <div class="chat-header">
              <div class="chat-title">cloudai</div>
              <div class="chat-actions">
                <div class="chat-action" id="settings-btn">
                  <i class="fa-solid fa-gear"></i>
                </div>
              </div>
            </div>
            
            <!-- Empty State (shown when no chat is active) -->
            <div class="empty-state" id="empty-state">
              <div class="empty-state-icon">
                <i class="fa-solid fa-robot"></i>
              </div>
              <div class="empty-state-title">welcome to cloudai</div>
              <div class="empty-state-text">
                ask me anything and i'll do my best to help. i can answer questions, write content, explain concepts, and more.
              </div>
              <button class="empty-state-btn" id="start-chat-btn">start a new chat</button>
            </div>
            
            <!-- Chat Messages -->
            <div class="chat-messages" id="chat-messages">
              <!-- Messages will be populated by JavaScript -->
            </div>
            
            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typing-indicator">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
              <textarea class="message-input" id="message-input" placeholder="type a message..." rows="1"></textarea>
              <div class="send-btn" id="send-btn">
                <i class="fa-solid fa-paper-plane"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Settings Dropdown -->
  <div class="settings-dropdown" id="settings-dropdown">
    <div class="settings-section">
      <h3>preferences</h3>
      <div class="settings-option">
        <span>chill lowercase tone</span>
        <label class="toggle-switch">
          <input type="checkbox" id="lowercase-toggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>
    
    <div class="settings-section">
      <h3>model</h3>
      <div class="settings-option">
        <span>cloudai standard</span>
        <label class="toggle-switch">
          <input type="checkbox" checked disabled>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script src="js/theme.js"></script>
  <script src="js/wallpaper.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/header.js"></script>
  <script src="js/main.js"></script>
  
  <script>
    // AI Chat functionality
    document.addEventListener('DOMContentLoaded', () => {
      // DOM elements
      const threadItems = document.getElementById('thread-items');
      const chatMessages = document.getElementById('chat-messages');
      const messageInput = document.getElementById('message-input');
      const sendBtn = document.getElementById('send-btn');
      const newChatBtn = document.getElementById('new-chat-btn');
      const startChatBtn = document.getElementById('start-chat-btn');
      const emptyState = document.getElementById('empty-state');
      const typingIndicator = document.getElementById('typing-indicator');
      const settingsBtn = document.getElementById('settings-btn');
      const settingsDropdown = document.getElementById('settings-dropdown');
      const lowercaseToggle = document.getElementById('lowercase-toggle');
      
      // State
      let threads = [];
      let activeThreadId = null;
      let settings = {
        lowercaseTone: true
      };
      
      // Load threads and settings
      loadThreads();
      loadSettings();
      
      // If threads exist, activate the first one
      if (threads.length > 0) {
        activateThread(threads[0].id);
      } else {
        showEmptyState();
      }
      
      // Apply settings
      applySettings();
      
      // Create new thread
      function createNewThread() {
        const threadId = 'thread-' + Date.now();
        
        const newThread = {
          id: threadId,
          title: 'new chat',
          messages: [
            {
              role: 'ai',
              content: "hi there! i'm cloudai. how can i help you today?",
              timestamp: Date.now()
            }
          ],
          createdAt: Date.now(),
          updatedAt: Date.now()
        };
        
        threads.unshift(newThread);
        saveThreads();
        renderThreads();
        activateThread(threadId);
        hideEmptyState();
      }
      
      // Activate thread
      function activateThread(threadId) {
        activeThreadId = threadId;
        const thread = threads.find(t => t.id === threadId);
        
        if (!thread) return;
        
        // Update active thread in UI
        renderThreads();
        
        // Render messages
        renderMessages(thread.messages);
        
        // Hide empty state
        hideEmptyState();
        
        // Scroll to bottom
        scrollToBottom();
      }
      
      // Render threads
      function renderThreads() {
        threadItems.innerHTML = '';
        
        threads.forEach(thread => {
          const threadElement = document.createElement('div');
          threadElement.className = 'thread-item';
          threadElement.dataset.id = thread.id;
          
          if (thread.id === activeThreadId) {
            threadElement.classList.add('active');
          }
          
          // Get last message for preview
          const lastMessage = thread.messages[thread.messages.length - 1];
          const preview = lastMessage ? lastMessage.content.substring(0, 30) + (lastMessage.content.length > 30 ? '...' : '') : '';
          
          threadElement.innerHTML = `
            <div class="thread-item-title">${thread.title}</div>
            <div class="thread-item-preview">${preview}</div>
          `;
          
          threadElement.addEventListener('click', () => {
            activateThread(thread.id);
          });
          
          threadItems.appendChild(threadElement);
        });
      }
      
      // Render messages
      function renderMessages(messages) {
        chatMessages.innerHTML = '';
        
        messages.forEach(message => {
          const messageElement = document.createElement('div');
          messageElement.className = `message ${message.role}`;
          
          const time = new Date(message.timestamp);
          const timeString = time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
          
          messageElement.innerHTML = `
            <div class="message-bubble">
              <div class="message-content">${message.content}</div>
              <div class="message-time">${timeString}</div>
            </div>
          `;
          
          chatMessages.appendChild(messageElement);
        });
        
        // Scroll to bottom
        scrollToBottom();
      }
      
      // Send message
      function sendMessage() {
        const content = messageInput.value.trim();
        
        if (!content) return;
        
        // If no active thread, create one
        if (!activeThreadId) {
          createNewThread();
        }
        
        const thread = threads.find(t => t.id === activeThreadId);
        if (!thread) return;
        
        // Add user message
        const userMessage = {
          role: 'user',
          content,
          timestamp: Date.now()
        };
        
        thread.messages.push(userMessage);
        thread.updatedAt = Date.now();
        
        // Update thread title if it's the first user message
        if (thread.title === 'new chat') {
          thread.title = content.substring(0, 20) + (content.length > 20 ? '...' : '');
        }
        
        // Clear input
        messageInput.value = '';
        
        // Render messages
        renderMessages(thread.messages);
        
        // Show typing indicator
        showTypingIndicator();
        
        // Simulate AI response
        setTimeout(() => {
          // Generate AI response
          const aiResponse = generateAIResponse(content);
          
          // Add AI message
          const aiMessage = {
            role: 'ai',
            content: settings.lowercaseTone ? aiResponse.toLowerCase() : aiResponse,
            timestamp: Date.now()
          };
          
          thread.messages.push(aiMessage);
          thread.updatedAt = Date.now();
          
          // Hide typing indicator
          hideTypingIndicator();
          
          // Render messages
          renderMessages(thread.messages);
          
          // Save threads
          saveThreads();
          renderThreads();
        }, 1500);
        
        // Save threads
        saveThreads();
        renderThreads();
      }
      
      // Generate AI response (simple simulation)
      function generateAIResponse(userMessage) {
        const responses = [
          "That's an interesting question! Let me think about it...",
          "I understand what you're asking. Here's what I know about that:",
          "Great question! I'd be happy to help with that.",
          "I've processed your request and here's what I can tell you:",
          "Thanks for asking! Here's my response:",
          "I've analyzed your question and here's what I think:",
          "That's something I can help with! Here's my response:",
          "I've thought about your question and here's my answer:",
          "I appreciate you asking that. Here's what I know:",
          "Let me address your question with what I know:"
        ];
        
        return responses[Math.floor(Math.random() * responses.length)];
      }
      
      // Show typing indicator
      function showTypingIndicator() {
        typingIndicator.classList.add('active');
        scrollToBottom();
      }
      
      // Hide typing indicator
      function hideTypingIndicator() {
        typingIndicator.classList.remove('active');
      }
      
      // Show empty state
      function showEmptyState() {
        emptyState.style.display = 'flex';
        chatMessages.style.display = 'none';
        typingIndicator.style.display = 'none';
      }
      
      // Hide empty state
      function hideEmptyState() {
        emptyState.style.display = 'none';
        chatMessages.style.display = 'flex';
        typingIndicator.style.display = 'flex';
      }
      
      // Scroll to bottom of chat
      function scrollToBottom() {
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
      
      // Save threads to localStorage
      function saveThreads() {
        localStorage.setItem('midnight_ai_threads', JSON.stringify(threads));
      }
      
      // Load threads from localStorage
      function loadThreads() {
        const savedThreads = localStorage.getItem('midnight_ai_threads');
        threads = savedThreads ? JSON.parse(savedThreads) : [];
      }
      
      // Save settings to localStorage
      function saveSettings() {
        localStorage.setItem('midnight_ai_settings', JSON.stringify(settings));
      }
      
      // Load settings from localStorage
      function loadSettings() {
        const savedSettings = localStorage.getItem('midnight_ai_settings');
        if (savedSettings) {
          settings = JSON.parse(savedSettings);
          lowercaseToggle.checked = settings.lowercaseTone;
        }
      }
      
      // Apply settings
      function applySettings() {
        // Apply lowercase setting
        if (settings.lowercaseTone) {
          document.body.classList.add('lowercase-tone');
        } else {
          document.body.classList.remove('lowercase-tone');
        }
      }
      
      // Auto-resize textarea
      function autoResizeTextarea() {
        messageInput.style.height = 'auto';
        messageInput.style.height = (messageInput.scrollHeight) + 'px';
      }
      
      // Event listeners
      newChatBtn.addEventListener('click', createNewThread);
      startChatBtn.addEventListener('click', createNewThread);
      
      sendBtn.addEventListener('click', sendMessage);
      
      messageInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
      
      messageInput.addEventListener('input', autoResizeTextarea);
      
      settingsBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        settingsDropdown.classList.toggle('active');
      });
      
      document.addEventListener('click', (e) => {
        if (!settingsDropdown.contains(e.target) && !settingsBtn.contains(e.target)) {
          settingsDropdown.classList.remove('active');
        }
      });
      
      lowercaseToggle.addEventListener('change', () => {
        settings.lowercaseTone = lowercaseToggle.checked;
        saveSettings();
        applySettings();
      });
    });
  </script>
</body>
</html>
